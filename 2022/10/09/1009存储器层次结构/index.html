<!DOCTYPE html><html lang="en"><head><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]--><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="YSH"><meta name="description" content="6.1 存储技术 随机访问存储器 RAM 静态 SRAM 位存储模式:双稳态存储器单元 只要有电,就能永远保持值   动态 DRAM 位存储模式: 电容充电   比较     每位晶体管数 相对访问时间 持续? 敏感 相对花费 应用    SRAM 6 1 是 否 1000 高速缓冲存储器   DRAM 1 10 否 是 1 主存&#x2F;帧缓冲区     非易失性存储器 ROM 关电后仍然能保"><meta property="og:type" content="article"><meta property="og:title" content="CSAPP 存储器层次结构 笔记"><meta property="og:url" content="http://nmhn.github.io/2022/10/09/1009%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/index.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="6.1 存储技术 随机访问存储器 RAM 静态 SRAM 位存储模式:双稳态存储器单元 只要有电,就能永远保持值   动态 DRAM 位存储模式: 电容充电   比较     每位晶体管数 相对访问时间 持续? 敏感 相对花费 应用    SRAM 6 1 是 否 1000 高速缓冲存储器   DRAM 1 10 否 是 1 主存&#x2F;帧缓冲区     非易失性存储器 ROM 关电后仍然能保"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2022-10-09T00:43:00.000Z"><meta property="article:modified_time" content="2022-10-13T04:42:09.204Z"><meta property="article:author" content="YSH"><meta property="article:tag" content="操作系统"><meta property="article:tag" content="csapp"><meta property="article:tag" content="笔记"><meta name="twitter:card" content="summary"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><link rel="shortcut icon" href="/favicon.png"><link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet"><link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><title>CSAPP 存储器层次结构 笔记 | Hexo</title><script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script>var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: 
    }</script><script>yiliaConfig.jquery_ui=[!1]</script><script>yiliaConfig.rootUrl="/"</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="container"><div class="left-col"><div class="overlay"></div><div class="intrude-less"><header id="header" class="inner"><a href="/" class="profilepic"><img src="/img/avatar.png" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/"></a></h1></hgroup><div id="switch-btn" class="switch-btn"><div class="icon"><div class="icon-ctn"><div class="icon-wrap icon-house" data-idx="0"><div class="birdhouse"></div><div class="birdhouse_holes"></div></div><div class="icon-wrap icon-ribbon hide" data-idx="1"><div class="ribbon"></div></div><div class="icon-wrap icon-link hide" data-idx="2"><div class="loopback_l"></div><div class="loopback_r"></div></div><div class="icon-wrap icon-me hide" data-idx="3"><div class="user"></div><div class="shoulder"></div></div></div></div><div class="tips-box hide"><div class="tips-arrow"></div><ul class="tips-inner"><li>Menu</li><li>Tags</li><li>Friends</li><li>About Me</li></ul></div></div><div id="switch-area" class="switch-area"><div class="switch-wrap"><section class="switch-part switch-part1"><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" href="mailto:123@123.com" title="Email"></a> <a class="fa GitHub" href="#" title="GitHub"></a> <a class="fa RSS" href="/atom.xml" title="RSS"></a></ul></nav></section><section class="switch-part switch-part2"><div class="widget tagcloud" id="js-tagcloud"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/MC/" rel="tag">MC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VM/" rel="tag">VM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/" rel="tag">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/class3/" rel="tag">class3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/computer/" rel="tag">computer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csapp/" rel="tag">csapp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/" rel="tag">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/exp8/" rel="tag">exp8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qemu/" rel="tag">qemu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%80%E5%B7%A7/" rel="tag">技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag">操作系统,计算机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A0%81/" rel="tag">编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80/" rel="tag">网络地址</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E5%B1%82/" rel="tag">网络层</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag">计算机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%BD%91/" rel="tag">计网</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" rel="tag">软件体系结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E8%B4%A8%E9%87%8F%E4%B8%8E%E8%AF%84%E6%B5%8B%E6%8A%80%E6%9C%AF/" rel="tag">软件质量与评测技术</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul></div></section><section class="switch-part switch-part3"><div id="js-friends"><a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="https://pages.github.com/">GitHub</a> <a class="main-nav-link switch-friends-link" target="_blank" rel="noopener" href="http://moxfive.xyz/">MOxFIVE</a></div></section><section class="switch-part switch-part4"><div id="js-aboutme">专注于前端</div></section></div></div></header></div></div><div class="mid-col"><nav id="mobile-nav"><div class="overlay"><div class="slider-trigger"></div><h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页"></a></h1></div><div class="intrude-less"><header id="header" class="inner"><a href="/" class="profilepic"><img src="/img/avatar.png" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/" title="回到主页"></a></h1></hgroup><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li><div class="clearfix"></div></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" target="_blank" href="mailto:123@123.com" title="Email"></a> <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a> <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a></ul></nav></header></div><link class="menu-list" tags="Tags" friends="Friends" about="About Me"></nav><div class="body-wrap"><article id="post-1009存储器层次结构" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2022/10/09/1009%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/" class="article-date"><time datetime="2022-10-09T00:43:00.000Z" itemprop="datePublished">2022-10-09</time></a></div><div class="article-inner"><input type="hidden" class="isFancy"><header class="article-header"><h1 class="article-title" itemprop="name">CSAPP 存储器层次结构 笔记</h1></header><div class="article-info article-info-post"><div class="article-category tagcloud"><a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></div><div class="article-tag tagcloud"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/csapp/" rel="tag">csapp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li></ul></div><div class="clearfix"></div></div><div class="article-entry" itemprop="articleBody"><h2 id="6-1-存储技术"><a href="#6-1-存储技术" class="headerlink" title="6.1 存储技术"></a>6.1 存储技术</h2><ul><li><h3 id="随机访问存储器-RAM"><a href="#随机访问存储器-RAM" class="headerlink" title="随机访问存储器 RAM"></a>随机访问存储器 RAM</h3><ul><li><h4 id="静态-SRAM"><a href="#静态-SRAM" class="headerlink" title="静态 SRAM"></a>静态 SRAM</h4><blockquote><p>位存储模式:双稳态存储器单元</p><p>只要有电,就能永远保持值</p></blockquote></li><li><h4 id="动态-DRAM"><a href="#动态-DRAM" class="headerlink" title="动态 DRAM"></a>动态 DRAM</h4><blockquote><p>位存储模式: 电容充电</p></blockquote></li><li><h4 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h4></li><li><table><thead><tr><th></th><th>每位晶体管数</th><th>相对访问时间</th><th>持续?</th><th>敏感</th><th>相对花费</th><th>应用</th></tr></thead><tbody><tr><td>SRAM</td><td>6</td><td>1</td><td>是</td><td>否</td><td>1000</td><td>高速缓冲存储器</td></tr><tr><td>DRAM</td><td>1</td><td>10</td><td>否</td><td>是</td><td>1</td><td>主存&#x2F;帧缓冲区</td></tr></tbody></table></li><li></li><li><h4 id="非易失性存储器-ROM"><a href="#非易失性存储器-ROM" class="headerlink" title="非易失性存储器 ROM"></a>非易失性存储器 ROM</h4><blockquote><p>关电后仍然能保持信息</p></blockquote></li><li><h4 id="访问主存"><a href="#访问主存" class="headerlink" title="访问主存"></a>访问主存</h4><blockquote><p>通过数据总线和主存信息交互</p></blockquote></li></ul></li><li><h3 id="磁盘存储"><a href="#磁盘存储" class="headerlink" title="磁盘存储"></a>磁盘存储</h3><ul><li><p>从磁盘读数据的效率是从DRAM读数据的几乎10万倍慢,不过ssd会快的多,不过只是相对于传统磁盘而言</p></li><li><p>固态磁盘SSD</p><ul><li><p>读SSD比写要快</p><ul><li>因为随机写要擦除块,这个动作是毫秒级的</li><li>如果试图写一个有数据的块,会先将这块的数据复制到另一个没数据的地方</li></ul></li><li><p>SSD多次重复写后会损坏</p></li></ul></li></ul></li></ul><h2 id="6-2局部性"><a href="#6-2局部性" class="headerlink" title="6.2局部性"></a>6.2局部性</h2><h3 id="局部性原理"><a href="#局部性原理" class="headerlink" title="局部性原理"></a>局部性原理</h3><p>计算机程序倾向于引用邻近与其他最近引用过的数据项的数据项</p><h3 id="简单原则"><a href="#简单原则" class="headerlink" title="简单原则"></a>简单原则</h3><ul><li>重复引用相同变量的程序有良好的时间局部性</li><li>对于步长为k的引用模式的程序,步长越小,空间局部性越好.</li><li>对于取指令来说,循环有好的时间和空间局部性.循环体越小,迭代次数越多,局部性越好</li></ul><h2 id="6-3-存储器层次结构"><a href="#6-3-存储器层次结构" class="headerlink" title="6.3 存储器层次结构"></a>6.3 存储器层次结构</h2><ul><li>L0 寄存器 –保存着从高速缓存中取出的字</li><li>L1 高速缓存 SRAM –缓存着从L2取出的缓存行 – 速度接近寄存器</li><li>L2 高速缓存 SRAM –缓存着从L3取出的缓存行 – 速度比L1慢</li><li>L3 高速缓存 SRAM –缓存着从主存高速缓存取出的缓存行 –速度比L2慢</li><li>L4 主存 DRAM – 保存着从本地磁盘取出的代码块</li><li>L5 本地耳机存储 本地磁盘 –保存着从远程网络服务器磁盘上读取的文件</li><li>L6 远程二级存储 [分布式文件系统,Web服务器]</li></ul><h2 id="6-4-高速缓存存储器"><a href="#6-4-高速缓存存储器" class="headerlink" title="6.4 高速缓存存储器"></a>6.4 高速缓存存储器</h2><h3 id="6-4-1-通用的高速缓存存储器组织结构"><a href="#6-4-1-通用的高速缓存存储器组织结构" class="headerlink" title="6.4.1 通用的高速缓存存储器组织结构"></a>6.4.1 通用的高速缓存存储器组织结构</h3><blockquote><p>存储器地址位数: m</p><p>存储器地址数: M&#x3D;2^m</p><p>高速缓存组数 S&#x3D; 2^s</p><p>高速缓存组内缓存行: E</p><p>缓存行内数据块 B&#x3D;2^b</p><p>高速缓存大小: C&#x3D;S*E*B</p></blockquote><h3 id="6-4-2-直接映射高速缓存"><a href="#6-4-2-直接映射高速缓存" class="headerlink" title="6.4.2 直接映射高速缓存"></a>6.4.2 直接映射高速缓存</h3><blockquote><h4 id="特征-每个组只有一行-因此字选择时简单-但容易发生抖动"><a href="#特征-每个组只有一行-因此字选择时简单-但容易发生抖动" class="headerlink" title="特征: 每个组只有一行,因此字选择时简单,但容易发生抖动"></a>特征: 每个组只有一行,因此字选择时简单,但容易发生抖动</h4></blockquote><blockquote><h4 id="流程-假设执行一条读内存字w的指令"><a href="#流程-假设执行一条读内存字w的指令" class="headerlink" title="流程: 假设执行一条读内存字w的指令"></a>流程: 假设执行一条读内存字w的指令</h4><h4 id="组选择"><a href="#组选择" class="headerlink" title="组选择:"></a>组选择:</h4><ul><li>从w中抽取s个组标记位,s由高速缓存组数决定</li><li>之后查看高速缓存中是否存在该组,如果存在就得到一个缓存命中,不存在就是缓存不命中</li></ul><h4 id="字选择"><a href="#字选择" class="headerlink" title="字选择:"></a>字选择:</h4><ul><li>高速缓存中的偏移位标识了字节在块中的偏移</li></ul><h4 id="行替换"><a href="#行替换" class="headerlink" title="行替换:"></a>行替换:</h4><ul><li>如果缓存不命中,就需要从层次结构的下一层中取出被请求的块,然后将心的块存储在组索引所示的块中</li></ul><h4 id="示例"><a href="#示例" class="headerlink" title="示例:"></a>示例:</h4><ul><li>书P429</li></ul><h4 id="冲突不命中"><a href="#冲突不命中" class="headerlink" title="冲突不命中:"></a>冲突不命中:</h4><ul><li>由直接映射的设计可以看出,如果程序访问大小为2的幂的数组,很可能会发生冲突不命中.</li><li>相同组映射的内存块会不断的来回覆盖–抖动</li></ul></blockquote><h3 id="6-4-3-组相联高速缓存"><a href="#6-4-3-组相联高速缓存" class="headerlink" title="6.4.3 组相联高速缓存"></a>6.4.3 组相联高速缓存</h3><blockquote><p>每个组都有 1&lt;E&lt;C&#x2F;B 个高速缓存行的 的高速缓存通常称为E路组相联高速缓存</p><p>如果E&#x3D;C&#x2F;B 称为全相联高速缓存</p></blockquote><blockquote><h4 id="行匹配"><a href="#行匹配" class="headerlink" title="行匹配"></a>行匹配</h4><ul><li>检查多个行的标记和有效位,判断是否在缓存中</li></ul><h4 id="行替换-1"><a href="#行替换-1" class="headerlink" title="行替换"></a>行替换</h4><ul><li>如果组中有空行,则换到空行上去</li><li>如果没有,则根据替换策略替换–比如LRU</li></ul></blockquote><h3 id="6-4-4-写回"><a href="#6-4-4-写回" class="headerlink" title="6.4.4 写回"></a>6.4.4 写回</h3><blockquote><h4 id="怎么更新层次结构中-低一层的副本"><a href="#怎么更新层次结构中-低一层的副本" class="headerlink" title="怎么更新层次结构中,低一层的副本"></a>怎么更新层次结构中,低一层的副本</h4><ol><li>直写 – write throuth<ul><li>立即将w的高速缓存块写回到紧接着的第一层</li><li>每次写都会引起总线流量</li><li>能够使用独立于高速缓存的写缓冲区用来更新内存</li><li>读不命中开销小</li></ul></li><li>写回[ 延迟更新] write back<ul><li>只有当替换算法要驱逐这个块时,将这个块写到低一层</li><li>显著减少总线流量</li><li>增加复杂性– 需要维护一个新的位[修改位]</li><li>允许更多到内存的贷款用于执行DMA的I&#x2F;O.</li></ul></li></ol><h4 id="如何处理写不命中"><a href="#如何处理写不命中" class="headerlink" title="如何处理写不命中"></a>如何处理写不命中</h4><p>就是说,要写的块拿不到</p><ol><li>写分配 write-allocate<ul><li>加载相应的低一层的块到高速缓存中,然后更新这个高速缓存块</li><li>写回高速缓存通常是写分配的</li></ul></li><li>非写分配 not-write-<strong>allocate</strong><ul><li>避开高速缓存,直接把这个字写到低一层中</li><li>直写高速缓存通常是非写分配的</li></ul></li></ol></blockquote><h3 id="6-4-7-性能影响"><a href="#6-4-7-性能影响" class="headerlink" title="6.4.7 性能影响"></a>6.4.7 性能影响</h3><ol><li>不命中率<ul><li>执行期间,内存引用不命中的比率 不命中数量&#x2F;引用数量</li></ul></li><li>命中时间<ul><li>从高速缓存传送一个字到CPU所需的时间</li></ul></li><li>不命中处罚<ul><li>不命中所需的额外时间</li></ul></li></ol><h4 id="下列因素提高的影响"><a href="#下列因素提高的影响" class="headerlink" title="下列因素提高的影响"></a>下列因素提高的影响</h4><ul><li>高速缓存:命中率提高,命中时间提高</li><li>块大小:命中率提高,不命中处罚提高,损害时间局部性比空间局部性更好的程序的命中率</li><li>相联度:降低抖动可能,成本提高,增加不命中处罚</li></ul><h4 id="越往层次下面走-传送时间增加-减少传送的数量就更为重要"><a href="#越往层次下面走-传送时间增加-减少传送的数量就更为重要" class="headerlink" title="越往层次下面走,传送时间增加,减少传送的数量就更为重要."></a>越往层次下面走,传送时间增加,减少传送的数量就更为重要.</h4><h2 id="6-5-编写高速缓存友好的代码"><a href="#6-5-编写高速缓存友好的代码" class="headerlink" title="6.5 编写高速缓存友好的代码"></a>6.5 编写高速缓存友好的代码</h2><h3 id="两个原则"><a href="#两个原则" class="headerlink" title="两个原则"></a>两个原则</h3><ul><li>让最常见的情况运行的最快</li><li>尽量减少,每个循环内部的缓存不命中数量.</li></ul></div></div><div class="copyright"><p><span>Title:</span><a href="/2022/10/09/1009%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/">CSAPP 存储器层次结构 笔记</a></p><p><span>Author:</span><a href="/" title="Back to Homepage"></a></p><p><span>Created:</span>2022-10-09, 08:43:00</p><p><span>Updated:</span>2022-10-13, 12:42:09</p><p><span>Full URL:</span><a class="post-url" href="/2022/10/09/1009%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/" title="CSAPP 存储器层次结构 笔记">http://nmhn.github.io/2022/10/09/1009%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/</a> <span class="copy-path" data-clipboard-text="From http://nmhn.github.io/2022/10/09/1009%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/　　By " title="Copy Article&#39;s Link &amp; Author"><i class="fa fa-clipboard"></i></span><script>var clipboard=new Clipboard(".copy-path")</script></p><p><span>License:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"CC BY-NC-SA 4.0"</a> Keep Link &amp; Author if Distribute.</p></div><nav id="article-nav"><div id="article-nav-newer" class="article-nav-title"><a href="/2022/10/12/1012%20Linking/">CSAPP Linking 笔记</a></div><div id="article-nav-older" class="article-nav-title"><a href="/2022/10/08/1008CSAPP%20Optimize/">CSAPP Optimize 笔记</a></div></nav></article><div id="toc" class="toc-article"><strong class="toc-title">Contents</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">1.</span> <span class="toc-text">6.1 存储技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E5%AD%98%E5%82%A8%E5%99%A8-RAM"><span class="toc-number">1.1.</span> <span class="toc-text">随机访问存储器 RAM</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%99%E6%80%81-SRAM"><span class="toc-number">1.1.1.</span> <span class="toc-text">静态 SRAM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81-DRAM"><span class="toc-number">1.1.2.</span> <span class="toc-text">动态 DRAM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%94%E8%BE%83"><span class="toc-number">1.1.3.</span> <span class="toc-text">比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E6%98%93%E5%A4%B1%E6%80%A7%E5%AD%98%E5%82%A8%E5%99%A8-ROM"><span class="toc-number">1.1.4.</span> <span class="toc-text">非易失性存储器 ROM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E4%B8%BB%E5%AD%98"><span class="toc-number">1.1.5.</span> <span class="toc-text">访问主存</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%AD%98%E5%82%A8"><span class="toc-number">1.2.</span> <span class="toc-text">磁盘存储</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2%E5%B1%80%E9%83%A8%E6%80%A7"><span class="toc-number">2.</span> <span class="toc-text">6.2局部性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E6%80%A7%E5%8E%9F%E7%90%86"><span class="toc-number">2.1.</span> <span class="toc-text">局部性原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%8E%9F%E5%88%99"><span class="toc-number">2.2.</span> <span class="toc-text">简单原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">6.3 存储器层次结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">6.4 高速缓存存储器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-%E9%80%9A%E7%94%A8%E7%9A%84%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%AD%98%E5%82%A8%E5%99%A8%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84"><span class="toc-number">4.1.</span> <span class="toc-text">6.4.1 通用的高速缓存存储器组织结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-%E7%9B%B4%E6%8E%A5%E6%98%A0%E5%B0%84%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98"><span class="toc-number">4.2.</span> <span class="toc-text">6.4.2 直接映射高速缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E5%BE%81-%E6%AF%8F%E4%B8%AA%E7%BB%84%E5%8F%AA%E6%9C%89%E4%B8%80%E8%A1%8C-%E5%9B%A0%E6%AD%A4%E5%AD%97%E9%80%89%E6%8B%A9%E6%97%B6%E7%AE%80%E5%8D%95-%E4%BD%86%E5%AE%B9%E6%98%93%E5%8F%91%E7%94%9F%E6%8A%96%E5%8A%A8"><span class="toc-number">4.2.1.</span> <span class="toc-text">特征: 每个组只有一行,因此字选择时简单,但容易发生抖动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B-%E5%81%87%E8%AE%BE%E6%89%A7%E8%A1%8C%E4%B8%80%E6%9D%A1%E8%AF%BB%E5%86%85%E5%AD%98%E5%AD%97w%E7%9A%84%E6%8C%87%E4%BB%A4"><span class="toc-number">4.2.2.</span> <span class="toc-text">流程: 假设执行一条读内存字w的指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E9%80%89%E6%8B%A9"><span class="toc-number">4.2.3.</span> <span class="toc-text">组选择:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E9%80%89%E6%8B%A9"><span class="toc-number">4.2.4.</span> <span class="toc-text">字选择:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E6%9B%BF%E6%8D%A2"><span class="toc-number">4.2.5.</span> <span class="toc-text">行替换:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.2.6.</span> <span class="toc-text">示例:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%B2%E7%AA%81%E4%B8%8D%E5%91%BD%E4%B8%AD"><span class="toc-number">4.2.7.</span> <span class="toc-text">冲突不命中:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-3-%E7%BB%84%E7%9B%B8%E8%81%94%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98"><span class="toc-number">4.3.</span> <span class="toc-text">6.4.3 组相联高速缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E5%8C%B9%E9%85%8D"><span class="toc-number">4.3.1.</span> <span class="toc-text">行匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E6%9B%BF%E6%8D%A2-1"><span class="toc-number">4.3.2.</span> <span class="toc-text">行替换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-4-%E5%86%99%E5%9B%9E"><span class="toc-number">4.4.</span> <span class="toc-text">6.4.4 写回</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E6%9B%B4%E6%96%B0%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84%E4%B8%AD-%E4%BD%8E%E4%B8%80%E5%B1%82%E7%9A%84%E5%89%AF%E6%9C%AC"><span class="toc-number">4.4.1.</span> <span class="toc-text">怎么更新层次结构中,低一层的副本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%86%99%E4%B8%8D%E5%91%BD%E4%B8%AD"><span class="toc-number">4.4.2.</span> <span class="toc-text">如何处理写不命中</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-7-%E6%80%A7%E8%83%BD%E5%BD%B1%E5%93%8D"><span class="toc-number">4.5.</span> <span class="toc-text">6.4.7 性能影响</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E5%88%97%E5%9B%A0%E7%B4%A0%E6%8F%90%E9%AB%98%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">4.5.1.</span> <span class="toc-text">下列因素提高的影响</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B6%8A%E5%BE%80%E5%B1%82%E6%AC%A1%E4%B8%8B%E9%9D%A2%E8%B5%B0-%E4%BC%A0%E9%80%81%E6%97%B6%E9%97%B4%E5%A2%9E%E5%8A%A0-%E5%87%8F%E5%B0%91%E4%BC%A0%E9%80%81%E7%9A%84%E6%95%B0%E9%87%8F%E5%B0%B1%E6%9B%B4%E4%B8%BA%E9%87%8D%E8%A6%81"><span class="toc-number">4.5.2.</span> <span class="toc-text">越往层次下面走,传送时间增加,减少传送的数量就更为重要.</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E7%BC%96%E5%86%99%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E5%8F%8B%E5%A5%BD%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">5.</span> <span class="toc-text">6.5 编写高速缓存友好的代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E4%B8%AA%E5%8E%9F%E5%88%99"><span class="toc-number">5.1.</span> <span class="toc-text">两个原则</span></a></li></ol></li></ol></div><style>.left-col .switch-area,.left-col .switch-btn{display:none}.toc-level-3 i,.toc-level-3 ol{display:none!important}</style><input type="button" id="tocButton" value="Hide" title="Show or Hide Table of Contents"><script>yiliaConfig.toc=["Hide","Show",!0]</script><div class="share"><div class="bdsharebuttonbox"><a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a> <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a> <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a> <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a> <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a> <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a> <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a></div><script>with(window._bd_share_config={common:{bdSnsKey:{},bdText:"CSAPP 存储器层次结构 笔记　| Hexo　",bdMini:"2",bdMiniList:!1,bdPic:"",bdStyle:"0",bdSize:"24"},share:{}},document)(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)</script></div><div class="scroll" id="post-nav-button"><a href="/2022/10/12/1012%20Linking/" title="Pre: CSAPP Linking 笔记"><i class="fa fa-angle-left"></i> </a><a title="Mini Archives"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a> <a href="/2022/10/08/1008CSAPP%20Optimize/" title="Next: CSAPP Optimize 笔记"><i class="fa fa-angle-right"></i></a></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/10/15/qemu-cxl/">qemu cxl</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/13/1013%E7%BC%96%E5%86%99%E5%8F%AF%E8%AF%BB%E4%BB%A3%E7%A0%81%E7%9A%84%E8%89%BA%E6%9C%AF%20%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">编码技巧 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/13/1013%20%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81/">csapp 异常控制流</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/12/1012%E7%BC%96%E7%A0%81%E6%8A%80%E5%B7%A7/">编码技巧 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/12/1012%20Linking/">CSAPP Linking 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/09/1009%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/">CSAPP 存储器层次结构 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/08/1008CSAPP%20Optimize/">CSAPP Optimize 笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/07/1007csapp_CPu/">CSAPP Machine Level Programming</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/02/1002%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-Towards%20a%20Fully%20Disaggregated%20and%20Programmable/">论文阅读笔记-Towards a Fully Disaggregated and Programmable Data Center</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/10/01/1001GiantVm%20%E6%93%8D%E4%BD%9C%E8%BF%87%E7%A8%8B%20-ysh/">Giant VM 操作过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/09/29/0929CPU%E8%99%9A%E6%8B%9F%E5%8C%96/">CPU虚拟化</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/09/18/22-09-18-csapp02/">floats</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/09/17/2022-09-17-csapp01/">Bits Bytes and Integers</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/09/11/2022-09-11-%E8%AE%A1%E7%BB%84%E5%A4%8D%E4%B9%A0/">计组复习</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/09/04/2022-09-04-%E5%BE%AE%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/">微型数据库开发记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/02/2022-04-02-%E5%AD%97%E8%8A%82%E4%BA%8C%E9%9D%A2%E8%AE%B0%E5%BD%95/">字节二面记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/03/16/2022-03-14-React%E5%AD%A6%E4%B9%A020220314%20%E8%99%9A%E6%8B%9FDOM/">React学习20220314 虚拟DOM</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/03/16/2022-03-14-React%E5%AD%A6%E4%B9%A020220314%20SetState/">React学习20220314 SetState</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/03/13/2022-03-13-React%E5%AD%A6%E4%B9%A020220313%20Hook/">React学习20220313 Hook</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/03/12/2022-03-12-React%E5%AD%A6%E4%B9%A020220312/">React学习20220312 生命周期</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/03/11/2022-03-11-%E9%BB%91%E7%9B%92%E6%B5%8B%E8%AF%95/">黑盒测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/03/09/2022-03-09-%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95/">白盒测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/19/2021-12-19-MC%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AE/">MC服务器设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/11/2021-12-11-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0/">计算机网络复习</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/09/2021-12-09-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2/">网络地址转换</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/09/2021-12-09-%E8%AE%A1%E7%BD%91%E7%BD%91%E7%BB%9C%E5%B1%82/">网络层</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/09/2021-12-09-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">计网笔记-数据链路层</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/07/2021-12-07-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">21/12/6 软件体系结构复习-设计模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/07/2021-12-07-%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%A4%8D%E4%B9%A0/">21/12/6 软件体系结构复习</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/07/android%E4%B8%8E%E8%85%BE%E8%AE%AF%E4%BA%91mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5-windows/">未继续_android与腾讯云mysql数据库连接_windows</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/07/2021-12-07-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/">21/12/7 存储管理-操作系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/07/2021-12-07-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/">21/12/7 设备管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/07/2021-12-07/">文件系统-操作系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/06/2021-12-06-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7/">21/12/6 Database 数据库的安全性</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/06/2021-12-06-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/">21/12/6 Database 数据库操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/06/2021-12-06-database-Complication/">数据库完整性概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/06/2021-12-06-%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/">21/12/6 Database 查询优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/12/06/21-12-6-Database-exp-8/">21/12/6 Database exp 8</a></li></ul><script></script></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left"><i class="fa fa-copyright"></i> 2016-2023 YSH</div><div class="footer-right"><a href="http://hexo.io/" target="_blank" title="A fast, simple &amp; powerful blog framework">Hexo</a> Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="Another simple and elegant theme for Hexo  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i></div></div><div class="visit"><span id="busuanzi_container_site_pv" style="display:none"><span id="site-visit" title="Site Visitors"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span> </span></span><span>| </span><span id="busuanzi_container_page_pv" style="display:none"><span id="page-visit" title="Page Hits"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span></span></span></div></div></footer></div><script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script><script>$(document).ready(function(){var a,c;-1<window.navigator.userAgent.indexOf("iPad")||"none"===$(".left-col").css("display")?(c=["#9db3f4","#414141","#e5a859","#f5dfc6","#c084a0","#847e72","#cd8390","#996731"],a=Math.ceil(Math.random()*(c.length-1)),$("body").css({"background-color":c[a],"background-size":"cover"})):(c="url(/background/bg-x.jpg)".replace(/x/gi,Math.ceil(5*Math.random())),$("body").css({background:c,"background-attachment":"fixed","background-size":"cover"}))})</script><div class="scroll" id="scroll"><a href="#" title="Back to Top"><i class="fa fa-arrow-up"></i></a> <a href="#comments" onclick="load$hide()" title="Comments"><i class="fa fa-comments-o"></i></a> <a href="#footer" title="Go to Bottom"><i class="fa fa-arrow-down"></i></a></div><script>var x,oOpenInNew={archives:".archive-article-title",miniArchives:"a.post-list-link",friends:"#js-friends a",socail:".social a"};for(x in oOpenInNew)$(oOpenInNew[x]).attr("target","_blank")</script><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>