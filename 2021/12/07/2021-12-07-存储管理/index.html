<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>21/12/7 存储管理-操作系统 | Hexo</title><meta name="description" content="存储管理地址访问保护机制 上下界寄存器和地址检查机制  ​		作业拥有上下界,执行访存指令时,判断是否越界 ​		要求:作业程序是绝对地址或静态可浮动 2. 基址寄存器、长度寄存器和动态地址转换机制​		当作业被调度运行时，将作业所占内存基址及长度送基址、长度寄存器，在用户态每次执行访存指令时，先看访问地址是否小于长度，然后+基址进行访存。用户程序代码是动态浮动的 可变分区思想:预先不划分内存，当"><meta property="og:type" content="article"><meta property="og:title" content="21&#x2F;12&#x2F;7 存储管理-操作系统"><meta property="og:url" content="http://example.com/2021/12/07/2021-12-07-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/index.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="存储管理地址访问保护机制 上下界寄存器和地址检查机制  ​		作业拥有上下界,执行访存指令时,判断是否越界 ​		要求:作业程序是绝对地址或静态可浮动 2. 基址寄存器、长度寄存器和动态地址转换机制​		当作业被调度运行时，将作业所占内存基址及长度送基址、长度寄存器，在用户态每次执行访存指令时，先看访问地址是否小于长度，然后+基址进行访存。用户程序代码是动态浮动的 可变分区思想:预先不划分内存，当"><meta property="og:locale" content="en_US"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112134311512.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112140406228.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112140441074.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112141149243.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112142834494.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112144254340.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112144844677.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211116081410386.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211116083233571.png"><meta property="og:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211119140231647.png"><meta property="article:published_time" content="2021-12-07T00:43:00.000Z"><meta property="article:modified_time" content="2022-10-12T04:37:28.040Z"><meta property="article:author" content="John Doe"><meta property="article:tag" content="操作系统,计算机"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="c:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112134311512.png"><link rel="canonical" href="http://example.com/2021/12/07/2021-12-07-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/index.html"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet"><meta name="generator" content="Hexo 6.3.0"></head><body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/nmhn" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">俞森豪</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">A Student in bit</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Beijing, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/nmhn" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com/年没怀念2018" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>主要用来记录学习笔记,有时候会发一些教程</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E4%B8%89/">大三</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E4%B8%89/%E5%A4%B1%E8%B4%A5/">失败</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E4%B8%89/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E5%9B%9B/">大四</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E5%9B%9B/%E4%B8%8A%E4%BA%A4/">上交</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a><span class="category-list-count">8</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/MC/" style="font-size:13px">MC</a> <a href="/tags/React/" style="font-size:13.5px">React</a> <a href="/tags/VM/" style="font-size:13px">VM</a> <a href="/tags/android/" style="font-size:13px">android</a> <a href="/tags/class3/" style="font-size:13px">class3</a> <a href="/tags/computer/" style="font-size:13.17px">computer</a> <a href="/tags/csapp/" style="font-size:13.67px">csapp</a> <a href="/tags/database/" style="font-size:13px">database</a> <a href="/tags/exp8/" style="font-size:13.17px">exp8</a> <a href="/tags/%E6%8A%80%E5%B7%A7/" style="font-size:13px">技巧</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:13.83px">操作系统</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%A1%E7%AE%97%E6%9C%BA/" style="font-size:13px">操作系统,计算机</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size:13.17px">数据库</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size:14px">笔记</a> <a href="/tags/%E7%BC%96%E7%A0%81/" style="font-size:13px">编码</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80/" style="font-size:13px">网络地址</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%B1%82/" style="font-size:13px">网络层</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" style="font-size:13.33px">计算机</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size:13px">计算机网络</a> <a href="/tags/%E8%AE%A1%E7%BD%91/" style="font-size:13px">计网</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size:13.17px">软件体系结构</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E8%B4%A8%E9%87%8F%E4%B8%8E%E8%AF%84%E6%B5%8B%E6%8A%80%E6%9C%AF/" style="font-size:13.17px">软件质量与评测技术</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size:13px">面试</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">16</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></p><p class="item-title"><a href="/2022/10/13/1013%E7%BC%96%E5%86%99%E5%8F%AF%E8%AF%BB%E4%BB%A3%E7%A0%81%E7%9A%84%E8%89%BA%E6%9C%AF%20%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" class="title">编码技巧 笔记</a></p><p class="item-date"><time datetime="2022-10-13T08:07:00.000Z" itemprop="datePublished">2022-10-13</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></p><p class="item-title"><a href="/2022/10/13/1013%20%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81/" class="title">csapp 异常控制流</a></p><p class="item-date"><time datetime="2022-10-13T02:43:00.000Z" itemprop="datePublished">2022-10-13</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></p><p class="item-title"><a href="/2022/10/12/1012%E7%BC%96%E7%A0%81%E6%8A%80%E5%B7%A7/" class="title">编码技巧 笔记</a></p><p class="item-date"><time datetime="2022-10-12T01:43:00.000Z" itemprop="datePublished">2022-10-12</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></p><p class="item-title"><a href="/2022/10/12/1012%20Linking/" class="title">CSAPP Linking 笔记</a></p><p class="item-date"><time datetime="2022-10-12T00:43:00.000Z" itemprop="datePublished">2022-10-12</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></p><p class="item-title"><a href="/2022/10/09/1009%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/" class="title">CSAPP 存储器层次结构 笔记</a></p><p class="item-date"><time datetime="2022-10-09T00:43:00.000Z" itemprop="datePublished">2022-10-09</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-2021-12-07-存储管理" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">21/12/7 存储管理-操作系统</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2021/12/07/2021-12-07-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/" class="article-date"><time datetime="2021-12-07T00:43:00.000Z" itemprop="datePublished">2021-12-07</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/%E5%A4%A7%E4%B8%89/">大三</a>►<a class="article-category-link" href="/categories/%E5%A4%A7%E4%B8%89/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag">操作系统,计算机</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="/2021/12/07/2021-12-07-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/" class="leancloud_visitors" data-flag-title="21/12/7 存储管理-操作系统"><span class="leancloud-visitors-count">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/12/07/2021-12-07-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/#comments" class="article-comment-link">Comments</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 3k(words)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 10(minutes)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h1 id="存储管理"><a href="#存储管理" class="headerlink" title="存储管理"></a>存储管理</h1><h4 id="地址访问保护机制"><a href="#地址访问保护机制" class="headerlink" title="地址访问保护机制"></a>地址访问保护机制</h4><ol><li><h5 id="上下界寄存器和地址检查机制"><a href="#上下界寄存器和地址检查机制" class="headerlink" title="上下界寄存器和地址检查机制"></a>上下界寄存器和地址检查机制</h5></li></ol><p>​ 作业拥有上下界,执行访存指令时,判断是否越界</p><p>​ 要求:作业程序是<strong>绝对地址</strong>或<strong>静态可浮动</strong></p><h5 id="2-基址寄存器、长度寄存器和动态地址转换机制"><a href="#2-基址寄存器、长度寄存器和动态地址转换机制" class="headerlink" title="2. 基址寄存器、长度寄存器和动态地址转换机制"></a>2. 基址寄存器、长度寄存器和动态地址转换机制</h5><p>​ <strong>当作业被调度运行时，将作业所占内存基址及长度送基址、长度寄存器，在用户态每次执行访存指令时，先看访问地址是否小于长度，然后+基址进行访存。用户程序代码是</strong>动态浮动的</p><h2 id="可变分区"><a href="#可变分区" class="headerlink" title="可变分区"></a>可变分区</h2><h6 id="思想-预先不划分内存，当作业需要时向系统申请，系统从其中挖出一块给该作业"><a href="#思想-预先不划分内存，当作业需要时向系统申请，系统从其中挖出一块给该作业" class="headerlink" title="思想:预先不划分内存，当作业需要时向系统申请，系统从其中挖出一块给该作业"></a>思想:<strong>预先不划分内存，当作业需要时向系统申请，系统从其中挖出一块给该作业</strong></h6><p>Q:<u>空闲区域如何管理</u>?</p><h3 id="多道连续可变分区法"><a href="#多道连续可变分区法" class="headerlink" title="多道连续可变分区法"></a><strong>多道连续可变分区法</strong></h3><h5 id="特点-多道-连续-不固定划分内存"><a href="#特点-多道-连续-不固定划分内存" class="headerlink" title="特点:多道,连续,不固定划分内存"></a>特点:多道,连续,不固定划分内存</h5><h5 id="管理方法"><a href="#管理方法" class="headerlink" title="管理方法"></a>管理方法</h5><p><strong>系统设置一个空闲块队列，初始状态时队列中只有一个连续的空闲块。作业到达后，以</strong>某种策略分配空间。作业撤离时，将释放的空间加入空闲队列。</p><h5 id="释放方法"><a href="#释放方法" class="headerlink" title="释放方法"></a>释放方法</h5><p>相邻合并,否则插入</p><h5 id="例一"><a href="#例一" class="headerlink" title="例一"></a>例一</h5><p>进入执行顺序:(1,2,3)-&gt;(4)-&gt;(5)</p><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112134311512.png" alt="image-20211112134311512"></p><h4 id="分配方法"><a href="#分配方法" class="headerlink" title="分配方法"></a>分配方法</h4><ol><li>首次满足法 从头到尾找,找到的第一个满足它的空间就给它</li><li>最佳满足法 从队列中找一个最接近的空闲队列给它</li><li>最大满足法 每次找最大的空间给最新创建的进程</li></ol><h4 id="可用空间管理"><a href="#可用空间管理" class="headerlink" title="可用空间管理"></a>可用空间管理</h4><h5 id="紧致机制–将已有的进程挪到一起-腾出大块的连续空间"><a href="#紧致机制–将已有的进程挪到一起-腾出大块的连续空间" class="headerlink" title="紧致机制–将已有的进程挪到一起,腾出大块的连续空间"></a>紧致机制–将已有的进程挪到一起,腾出大块的连续空间</h5><h5 id="可再定位式分区–浮动分区分配"><a href="#可再定位式分区–浮动分区分配" class="headerlink" title="可再定位式分区–浮动分区分配"></a>可再定位式分区–浮动分区分配</h5><h2 id="页式存储管理"><a href="#页式存储管理" class="headerlink" title="页式存储管理"></a>页式存储管理</h2><h6 id="解决作业不连续存放的问题"><a href="#解决作业不连续存放的问题" class="headerlink" title="解决作业不连续存放的问题"></a>解决作业不连续存放的问题</h6><p><strong>特点：</strong> <strong>作业</strong> <strong>(进程)</strong> <strong>分成页面，内存也划分成页面，将作业</strong> **(进程 **) <strong>页面不连续地分布到内存页面</strong></p><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112140406228.png" alt="image-20211112140406228"></p><h5 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h5><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112140441074.png" alt="image-20211112140441074"></p><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112141149243.png" alt="image-20211112141149243"></p><p><strong>分页逻辑地址</strong> <strong>&#x3D; P(页号).d(</strong> <strong>页内位移</strong> ** ) **</p><p><strong>分页物理地址</strong> <strong>&#x3D; f(<strong><strong>页帧号</strong></strong>).d(<strong><strong>同上</strong></strong>)</strong></p><p><strong>P &#x3D;</strong> <strong>线性逻辑地址</strong> <strong>&#x2F;</strong> <strong>页面大小；</strong></p><p><strong>d &#x3D;</strong> <strong>线性逻辑地址</strong> **- P***<strong>页面大小。</strong></p><h6 id="为什么是2的k次幂"><a href="#为什么是2的k次幂" class="headerlink" title="为什么是2的k次幂?"></a>为什么是2的k次幂?</h6><p>将乘除法转成移位运算</p><p><strong>为了取出一个数据，系统需要访问内存几次？</strong>–两次:1.取页表,2.取数据</p><h3 id="快表"><a href="#快表" class="headerlink" title="快表"></a>快表</h3><p>由一组联想寄存器(TLB, Translation Lookaside Buffer)组成。</p><p><strong>联想寄存器：一种按内容进行并行查找的快速寄存器，访问速度比主存快得多</strong></p><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112142834494.png" alt="image-20211112142834494"></p><h6 id="使用bitmap数组-x2F-空闲页帧链管理可用页帧"><a href="#使用bitmap数组-x2F-空闲页帧链管理可用页帧" class="headerlink" title="使用bitmap数组&#x2F;空闲页帧链管理可用页帧"></a>使用bitmap数组&#x2F;空闲页帧链管理可用页帧</h6><h5 id="共享"><a href="#共享" class="headerlink" title="共享"></a>共享</h5><p><strong>通过页表可以使几个逻辑空间指向同一个物理空间，实现程序共享。</strong></p><h5 id="越界保护"><a href="#越界保护" class="headerlink" title="越界保护"></a>越界保护</h5><p>设置页表长度寄存器,查页表前,检查页号是否越界</p><h5 id="访问保护"><a href="#访问保护" class="headerlink" title="访问保护"></a>访问保护</h5><p><strong>在每个页表项中增设一存储保护域，用于说明对该页的访问权限，每一个对该页存储的访问都首先要比照是否满足该页访问权限的说明，满足则访问，否则报异常。</strong></p><h3 id="O优点"><a href="#O优点" class="headerlink" title="Ø优点"></a>Ø<strong>优点</strong></h3><p>ü<strong>没有外碎片，每个内碎片不超过页大小。</strong></p><p>ü<strong>程序不必连续存放。</strong></p><h3 id="O主要缺点："><a href="#O主要缺点：" class="headerlink" title="Ø主要缺点："></a>Ø<strong>主要缺点：</strong></h3><p>ü<strong>程序要一次全部装入内存才能执行。</strong></p><p>ü<strong>采用动态地址变换机构会增加计算机的成本和降低处理机的速度。</strong></p><p>ü<strong>各种数据结构</strong>(页表，空闲页表)要占用一定的内存空间，而且系统要花费一定的时间来建立和管理这些表格。</p><p>ü<strong>依然存在内碎片。</strong></p><h2 id="段式存储管理"><a href="#段式存储管理" class="headerlink" title="段式存储管理"></a>段式存储管理</h2><h4 id="特点-按作业的自然段将其逻辑空间分成若干段，作业以段为单位分配内存。"><a href="#特点-按作业的自然段将其逻辑空间分成若干段，作业以段为单位分配内存。" class="headerlink" title="特点:按作业的自然段将其逻辑空间分成若干段，作业以段为单位分配内存。"></a>特点:<strong>按作业的自然段将其逻辑空间分成若干段，作业以段为单位分配内存。</strong></h4><p>Ø<strong>用户作业逻辑空间为二维空间，由若干自然段组成。</strong></p><p>Ø 逻辑地址：段号段内偏移，记作S,d。编译及装配时把所有地址记成(S,d)的形式。</p><p>Ø <strong>物理内存空间管理：与多道可变划分法一样，系统以段为单位分配物理内存。</strong></p><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112144254340.png" alt="image-20211112144254340"></p><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211112144844677.png" alt="image-20211112144844677"></p><h3 id="段页式管理"><a href="#段页式管理" class="headerlink" title="段页式管理"></a>段页式管理</h3><p>特点：<strong>将作业分成若干段，每段用页式管理实现内存分配</strong></p><p><strong>为了获得一条指令或者数据，需要访问内存几次？</strong>–3次,段表,页表,数据</p><h2 id="内存扩充技术"><a href="#内存扩充技术" class="headerlink" title="内存扩充技术"></a>内存扩充技术</h2><h6 id="借助大容量的辅存实现内存的扩充"><a href="#借助大容量的辅存实现内存的扩充" class="headerlink" title="借助大容量的辅存实现内存的扩充"></a>借助大容量的辅存实现内存的扩充</h6><h3 id="覆盖技术"><a href="#覆盖技术" class="headerlink" title="覆盖技术"></a>覆盖技术</h3><p><strong>将用户空间划分成一个固定区和多个覆盖区。主程序放固定区，依次调用的子程序则放在同一个覆盖区。****操作系统提供覆盖系统调用函数，由用户编程序显式调用</strong></p><p>相当于时间换空间</p><h3 id="交换技术"><a href="#交换技术" class="headerlink" title="交换技术"></a>交换技术</h3><p>将处于等待状态(等I&#x2F;O结束)或就绪(等CPU)状态的作业从主存换出到辅存，把将要执行的进程移入主存。</p><p>优点:</p><p>提高并发性</p><p>缺点:</p><p>换入换出增加处理机开销</p><p>程序换入时存在重定位问题</p><h6 id="和覆盖技术对比"><a href="#和覆盖技术对比" class="headerlink" title="和覆盖技术对比"></a>和覆盖技术对比</h6><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211116081410386.png" alt="image-20211116081410386"></p><h3 id="虚拟存储技术"><a href="#虚拟存储技术" class="headerlink" title="虚拟存储技术"></a>虚拟存储技术</h3><h4 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h4><p>程序中不是每一条指令都会在程序的一次运行过程中执行到。<br>错误处理子程序<br>条件语句(if…else…)<br>程序中有的指令可能只执行一次<br>程序的初始化部分<br>程序执行的局部性原理：在一段时间内，作业一般不会执行到所有程序的指令，也不会存取绝大部分数据，执行的代码和要存取的数据往往集中在某些区域中(例如一个循环、一个数组)。</p><h5 id="目的：提供用户进程一个巨大的虚拟存储空间"><a href="#目的：提供用户进程一个巨大的虚拟存储空间" class="headerlink" title="目的：提供用户进程一个巨大的虚拟存储空间"></a>目的：提供用户进程一个巨大的虚拟存储空间</h5><h5 id="手段：利用外存-磁盘-实现此虚空间。"><a href="#手段：利用外存-磁盘-实现此虚空间。" class="headerlink" title="手段：利用外存(磁盘)实现此虚空间。"></a>手段：利用外存(磁盘)实现此虚空间。</h5><h4 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a><strong>基本思想</strong></h4><p>系统为进程提供一个比物理内存大得多的虚拟存储空间，虚拟空间大小不受物理内存大小的限制。</p><p>虚拟空间的容量由系统的有效地址长度决定。假设地址长度为32，按字节寻址，则虚拟存储空间大小为$2^{32}$个字节。</p><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a><strong>原理</strong></h4><p>在程序装入时，不必一次将其全部读入到内存，而只需将<strong>当前需要执行的某些区域</strong>读入到内存，然后程序开始执行。在程序执行过程中，如果<strong>需执行的指令或访问的数据尚未在内存</strong>，则由处理器<strong>通知操作系统将相应的区域调入内存</strong>，然后继续执行。</p><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><h5 id="虚拟页式"><a href="#虚拟页式" class="headerlink" title="虚拟页式"></a>虚拟页式</h5><h6 id="页表增加外存标识位和外存地址项"><a href="#页表增加外存标识位和外存地址项" class="headerlink" title="页表增加外存标识位和外存地址项"></a>页表增加外存标识位和外存地址项</h6><p><strong>当内存中没有空闲页面时，如果还要调入一个新页，如何处理？</strong></p><p>​	淘汰掉一个内存中的页(淘汰策略)</p><h6 id="交换区"><a href="#交换区" class="headerlink" title="交换区"></a>交换区</h6><p>用来回写<strong>数据初始值和初值为0的工作区</strong></p><p><strong>页表项结构</strong></p><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211116083233571.png" alt="image-20211116083233571"></p><p>合法位：置上表示该页在内存。<br>修改位：置上表示该页被修改过，在释放或淘汰时应写<br>回外存。<br>页类型：零页时：表示该页在分配物理页帧时应清0页帧<br>空间;回写swap区页时:表示回写swap区。<br>保护码：R、W、E保护说明。<br>外存块号：该页所在外存的块号。<br>页 帧 号：当合法位置上时代表该页所在内存的页帧号。</p><h6 id="缺页处理"><a href="#缺页处理" class="headerlink" title="缺页处理"></a>缺页处理</h6><p>根据发生页故障的虚地址得到页表项；<br>申请一个可用的页帧(根据所采用的替换策略可能需要引起淘汰某一页);<br>检查页类型，若为零页，则将页帧清0，将页帧号填入页表项的页帧号一栏，置合法位为1。若非零页，则调用I&#x2F;O子系统将外存块号所指的数据读到可用页帧，将页帧号填入页表项中，合法位置1，结束。</p><h6 id="页淘汰"><a href="#页淘汰" class="headerlink" title="页淘汰"></a>页淘汰</h6><p>查P页表项的修改位，若未修改，则清0合法位，将页帧送回空闲页帧队列。<br>若已修改，则检查类型栏。<br>若是零页或回写swap区页（代表还没有分配交换区空间），则申请一块swap区空间，将P的外存块号置上并清除页类型。<br>调用I&#x2F;0子系统将页帧上的数据写到外存块号所指的外存空间。清0合法位，将页帧送回空闲页帧队列。</p><h3 id="页面置换策略"><a href="#页面置换策略" class="headerlink" title="页面置换策略"></a>页面置换策略</h3><h6 id="出发点：-把未来不再使用的或者短时期内较少使用的页面调出"><a href="#出发点：-把未来不再使用的或者短时期内较少使用的页面调出" class="headerlink" title="出发点： 把未来不再使用的或者短时期内较少使用的页面调出"></a>出发点： 把未来不再使用的或者短时期内较少使用的页面调出</h6><p>基本概念</p><h6 id="驻留集：进程的合法页集合"><a href="#驻留集：进程的合法页集合" class="headerlink" title="驻留集：进程的合法页集合"></a>驻留集：进程的合法页集合</h6><h6 id="访问串：进程访问虚拟空间的地址踪迹"><a href="#访问串：进程访问虚拟空间的地址踪迹" class="headerlink" title="访问串：进程访问虚拟空间的地址踪迹"></a>访问串：进程访问虚拟空间的地址踪迹</h6><p>举例：某进程依次访问如下地址，0100，0432，0101，0612，0102，0103，…<br>页式虚存管理以页为基本单位，只需页号即可。设页面大小为100，上述访问串可简化为1，4，1，6，1，1，…</p><h4 id="驻留集大小固定的局部置换策略"><a href="#驻留集大小固定的局部置换策略" class="headerlink" title="驻留集大小固定的局部置换策略"></a>驻留集大小固定的局部置换策略</h4><h5 id="FIFO（先进先出）"><a href="#FIFO（先进先出）" class="headerlink" title="FIFO（先进先出）"></a>FIFO（先进先出）</h5><p>替换最早进入的页</p><p>效果奇差</p><p>有<strong>Belady奇异</strong> <strong>指置换策略不满足随着驻留集的增大，页故障数一定减少的规律。</strong></p><h5 id="OPT（最佳算法）"><a href="#OPT（最佳算法）" class="headerlink" title="OPT（最佳算法）"></a>OPT（最佳算法）</h5><p>需要预先知道整个访问串的序列（因此不可实现）</p><p>理论最优</p><h5 id="LRU（最近最少使用）"><a href="#LRU（最近最少使用）" class="headerlink" title="LRU（最近最少使用）"></a>LRU（最近最少使用）</h5><p><strong>淘汰上次使用距当前最远的页</strong></p><p>栈算法</p><p>LRU策略中，当驻留集大小为m时，S（m，t）中保持着最近使用过的m个页帧；当驻留集大小为m+1时，S（m+1，t）中保持着最近使用过的m+1个页帧。故S（m，t）属于 S（m+1，t），LRU策略是栈算法。</p><h5 id="CLOCK"><a href="#CLOCK" class="headerlink" title="CLOCK"></a>CLOCK</h5><p>基于LRU的思想<br>硬件在页面被访问时设置页表项中的访问位<br>随着表针的移动，淘汰访问位是0的页面，或清除页面的访问位。<br>实用的页面置换算法</p><h5 id="NRU-最近未使用"><a href="#NRU-最近未使用" class="headerlink" title="NRU(最近未使用)"></a>NRU(最近未使用)</h5><p>为页帧在页表项中增加一位使用位，硬件每访存一次即将对应页的使用位置1，操作系统页面管理程序定时将所有使用位清0。淘汰时任选一个使用位为0(表示OS清0周期内没被使用过）的页。<br>操作系统选择淘汰页时，尽量避免选被修改过的页。因此，选择淘汰页次序：</p><h4 id="驻留集大小可变的全局置换策略"><a href="#驻留集大小可变的全局置换策略" class="headerlink" title="驻留集大小可变的全局置换策略"></a>驻留集大小可变的全局置换策略</h4><h5 id="WS"><a href="#WS" class="headerlink" title="WS"></a>WS</h5><p>若驻留集中某页有$\triangle$个访问间隔没被访问则将其淘汰(正是因为这个特性,才是动态的)</p><h6 id="实现"><a href="#实现" class="headerlink" title="实现:"></a>实现:</h6><p>每一页面设一计数器,每访存一次,将所有其他页计数器+1,所访存的计数器清零,淘汰计数器等于$\triangle$的页面</p><h5 id="实际上-开销太大-没有用"><a href="#实际上-开销太大-没有用" class="headerlink" title="实际上:开销太大,没有用"></a>实际上:开销太大,没有用</h5><h5 id="SWS"><a href="#SWS" class="headerlink" title="SWS"></a>SWS</h5><p>定时检查计时器,淘汰计时器值大于等于$\triangle$的页面(当前时钟值-页表时钟值)&gt;$\triangle$的页面)</p><h5 id="硬件消耗还是很大"><a href="#硬件消耗还是很大" class="headerlink" title="硬件消耗还是很大"></a>硬件消耗还是很大</h5><h3 id="置换策略选择"><a href="#置换策略选择" class="headerlink" title="置换策略选择"></a>置换策略选择</h3><p>动态驻留集sws+淘汰页数据延迟清除</p><p>设立两个队列：自由链表和修改链表。<br>定时做页淘汰（SWS）：淘汰时不立即抹去页中数据，根据页面修改否挂入自由链&#x2F;修改链，修改链过长或自由链过短时，回写页面后改挂到自由链中。<br>若paging in要用空页时,选自由链的第一页帧，这时页中数据被覆盖。<br>若在自由链&#x2F;修改链中的页面再次被访问时，则将该页从链中摘除,使该页又能通过页表项访问到。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 某计算机采用二级页表的分页存储管理方式，按字节编址，页大小为2^10 字节，页表项大小为2字节，逻辑地址结构为：</span><br><span class="line"></span><br><span class="line">逻辑地址空间大小为2^16页，则表示整个逻辑地址空间的页目录表中包含表项的个数至少是： ?</span><br></pre></td></tr></table></figure><p><img src="C:\Users\www13\AppData\Roaming\Typora\typora-user-images\image-20211119140231647.png" alt="image-20211119140231647"></p><p>逻辑空间: 2^16 *2^10 &#x3D;2^26</p><p>页大小为2^10 页表项大小为2,则一页能写2^9 个页表项</p><p>共2^16逻辑页,故需要 2^7页</p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://example.com/2021/12/07/2021-12-07-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/" title="21/12/7 存储管理-操作系统" target="_blank" rel="external">http://example.com/2021/12/07/2021-12-07-存储管理/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/nmhn" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/nmhn" target="_blank"><span class="text-dark">俞森豪</span><small class="ml-1x">A Student in bit</small></a></h3><div>在北理读软工的浙江孩子</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2021/12/07/android%E4%B8%8E%E8%85%BE%E8%AE%AF%E4%BA%91mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5-windows/" title="未继续_android与腾讯云mysql数据库连接_windows"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/2021/12/07/2021-12-07-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/" title="21/12/7 设备管理"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/nmhn" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com/年没怀念2018" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(i){return-1<GUEST.indexOf(i)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"MkE8c5Abvy4XAwiLVVgu2cbC-gzGzoHsz",appKey:"IYs46cd4ti4DN1JUw7aNIRVj",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!0})</script><script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script><script>$(document).ready(function(){$("article img").not("[hidden]").not(".panel-body img").each(function(){var a,t,n=$(this),e=n.attr("alt"),r=n.parent("a");r.length<1&&(-1!=(t=(a=this.getAttribute("src")).lastIndexOf("?"))&&(a=a.substring(0,t)),r=n.wrap('<a href="'+a+'"></a>').parent("a")),r.attr("data-fancybox","images"),e&&r.attr("data-caption",e)}),$().fancybox({selector:'[data-fancybox="images"]',hash:!1,loop:!1})})</script></body></html>